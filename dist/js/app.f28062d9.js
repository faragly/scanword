(function(t){function e(e){for(var n,s,a=e[0],u=e[1],c=e[2],d=0,f=[];d<a.length;d++)s=a[d],o[s]&&f.push(o[s][0]),o[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);l&&l(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var t,e=0;e<i.length;e++){for(var r=i[e],n=!0,a=1;a<r.length;a++){var u=r[a];0!==o[u]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={app:0},i=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=e,a=a.slice();for(var c=0;c<a.length;c++)e(a[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0849":function(t,e,r){},2796:function(t,e,r){"use strict";var n=r("0849"),o=r.n(n);o.a},"56d7":function(t,e,r){"use strict";r.r(e);r("cadf"),r("551c"),r("097d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("ScanWord",{attrs:{theme:"gvozd-sezona",arrowSize:{width:48,height:48}}})],1)},i=[],s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",[r("div",{staticClass:"scanword",class:t.classModifiers},t._l(t.cells,function(e){return r("div",{key:e.id,staticClass:"scanword__cell",class:[e.classes,{"scanword__cell--active":t.active.cells.indexOf(e.id)>-1,"scanword__cell--highlighted":t.highlighted.indexOf(e.id)>-1,"scanword__cell--focused":t.active.focused===e.id}],attrs:{coordinates:e.coordinates},on:{mouseover:function(r){t.highlight(e)},click:function(r){t.activate(e)}}},[t._v("\n      "+t._s(e.text)+"\n      "),e.editable?r("editable",{ref:e.id,refInFor:!0,attrs:{content:t.scanwordClue[e.id]},on:{"update:content":function(r){t.$set(t.scanwordClue,e.id,r)}}}):t._e(),e.arrows?r("div",t._l(e.arrows,function(e,n){return r("icon",{key:n,attrs:{size:t.arrowSize,glyph:e}})})):t._e()],1)}))])},a=[],u=(r("55dd"),r("f751"),r("aef6"),r("456d"),r("20d6"),r("ac6a"),r("7514"),r("bc3a")),c=r.n(u),l=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("svg",{class:t.className,attrs:{width:t.size.width,height:t.size.height}},[r("use",{attrs:{"xlink:href":t.glyph}})])},d=[],f={name:"icon",props:{className:{type:String},glyph:null,size:{type:Object,default:function(){return{width:null,height:null}}}}},h=f,g=(r("c547"),r("2877")),p=Object(g["a"])(h,l,d,!1,null,"c3e0f1e6",null);p.options.__file="Icon.vue";var v=p.exports,w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"editable-cell",attrs:{contenteditable:"true"},on:{keydown:t.update}})},y=[],x=(r("f559"),{name:"editable",props:{content:{type:String,default:""}},mounted:function(){this.$el.innerText=this.content},watch:{content:function(){this.$el.innerText=this.content}},methods:{update:function(t){var e=t.code.startsWith("Key")?t.key:"";[37,38,39,40].indexOf(t.keyCode)>-1?this.eventHub.$emit("cell-navigation",t):(this.$emit("update:content",e),this.eventHub.$emit("update-cell-content",e))}}}),b=x,m=(r("2796"),Object(g["a"])(b,w,y,!1,null,null,null));m.options.__file="Editable.vue";var _=m.exports,S={id:"top-left-x-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#top-left-x-usage",toString:function(){return this.url}},O={id:"top-left-y-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#top-left-y-usage",toString:function(){return this.url}},C={id:"top-x-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#top-x-usage",toString:function(){return this.url}},B={id:"top-right-x-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#top-right-x-usage",toString:function(){return this.url}},A={id:"top-right-y-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#top-right-y-usage",toString:function(){return this.url}},$={id:"bottom-left-x-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#bottom-left-x-usage",toString:function(){return this.url}},j={id:"bottom-left-y-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#bottom-left-y-usage",toString:function(){return this.url}},z={id:"bottom-x-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#bottom-x-usage",toString:function(){return this.url}},k={id:"bottom-y-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#bottom-y-usage",toString:function(){return this.url}},T={id:"bottom-right-x-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#bottom-right-x-usage",toString:function(){return this.url}},I={id:"bottom-right-y-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#bottom-right-y-usage",toString:function(){return this.url}},Y={id:"right-x-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#right-x-usage",toString:function(){return this.url}},W={id:"right-y-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#right-y-usage",toString:function(){return this.url}},X={id:"left-y-usage",viewBox:"0 0 200 200",url:r.p+"sprite-42241b.svg#left-y-usage",toString:function(){return this.url}},E={name:"ScanWord",components:{Icon:v,Editable:_},props:{theme:{type:String,default:null},size:{type:Object,default:function(){return{width:20,height:25}}},arrowSize:{type:Object,default:function(){return{width:45,height:45}}}},data:function(){return{ArrowTopLeftX:S,ArrowTopLeftY:O,ArrowTopX:C,ArrowTopRightX:B,ArrowTopRightY:A,ArrowBottomLeftX:$,ArrowBottomLeftY:j,ArrowBottomX:z,ArrowBottomY:k,ArrowBottomRightX:T,ArrowBottomRightY:I,ArrowRightX:Y,ArrowRightY:W,ArrowLeftY:X,scanword:{issues:[]},cells:[],active:{direction:null,focused:null,cells:[]},highlighted:[],scanwordClue:{},debug:!1}},created:function(){var t=this;c.a.get("./../../data/scanword.json").then(function(e){t.scanword=e.data,t.cells=t.filteredIssues()}),console.clear(),t.eventHub.$on("update-cell-content",t.saveScanwordClue),t.eventHub.$on("cell-navigation",t.cellNavigation)},mounted:function(){if(localStorage.getItem("scanwordClue"))try{this.scanwordClue=JSON.parse(localStorage.getItem("scanwordClue"))}catch(t){localStorage.removeItem("scanwordClue")}},computed:{classModifiers:function(){var t=["scanword--size-"+this.size.width+"x"+this.size.height];return this.theme&&t.push("scanword--"+this.theme),t}},methods:{getWordCoordinates:function(t){for(var e=this,r=e.scanword.issues.find(function(e){return t==="s"+(e.end.x-e.start.x+1)*(e.end.y-e.start.y+1)+"_x"+e.start.x+"y"+e.start.y}),n=r.answer?r.answer.length:r.length,o=[t],i=0;i<n;i++){var s="horizontal"===r.arrow.direction?r.arrow.x+i:r.arrow.x,a="horizontal"===r.arrow.direction?r.arrow.y:r.arrow.y+i;o.push("x"+s+"y"+a)}return o},filteredIssues:function(){var t=this,e=[],r=[];return t.scanword.issues.forEach(function(n){var o,i=n.answer?n.answer.length:n.length,s="horizontal"===n.arrow.direction,a=s?"X":"Y",u={x:n.end.x-n.start.x+1,y:n.end.y-n.start.y+1},c="s"+u.x*u.y+"_x"+n.start.x+"y"+n.start.y,l="";e.push({id:c,text:n.text,editable:!1,direction:a,coordinates:n.start,classes:["start-"+n.start.x,"end-"+n.end.x,"start-y-"+n.start.y,"end-y-"+n.end.y]}),n.arrow.x<n.start.x?l="Left":n.arrow.x>n.start.x&&(l="Right"),n.arrow.y<n.start.y?o="ArrowTop"+l+a:n.arrow.y===n.start.y?o="Arrow"+l+a:n.arrow.y>n.start.y&&(o="ArrowBottom"+l+a);for(var d=function(e){var i=s?n.arrow.x+e:n.arrow.x,a=s?n.arrow.y:n.arrow.y+e,u="x"+i+"y"+a,l={id:u,classes:["scanword__cell--empty","start-"+i,"end-"+i,"start-y-"+a,"end-y-"+a],arrows:{},partOf:[c],editable:!0,coordinates:{x:i,y:a}},d=r.findIndex(function(t){return t.id===l.id});d>-1&&r[d].partOf.push(c),d>-1&&0===e?r[d].arrows[o]=t[o]:-1===d&&0===e&&(l.arrows[o]=t[o]),-1===d&&r.push(l)},f=0;f<i;f++)d(f)}),e.concat(r)},highlight:function(t){var e=this;e.highlighted=[],void 0!==t&&t.partOf&&(e.highlighted=t.partOf.reduce(function(t,r){return t=t.concat(e.getWordCoordinates(r)),t},[]))},activate:function(t){var e=this,r=t.id;if(void 0===t||e.active.cells.length&&e.active.cells[0]===r)e.active={direction:null,focus:null,cells:[]};else{var n=t.arrows?Object.keys(t.arrows):[];e.active.direction=1===n.length&&n[0].endsWith("Y")?"Y":"X",t.partOf&&(r=1===t.partOf.length?t.partOf[0]:t.partOf.filter(function(t){return e.cells.find(function(e){return e.id===t}).direction===e.active.direction})[0]),e.active.cells=e.getWordCoordinates(r),e.active.focused=t.partOf?t.id:e.active.cells[1],e.$refs[e.active.focused]&&Array.isArray(e.$refs[e.active.focused])&&e.$refs[e.active.focused].length&&e.$refs[e.active.focused][0].$el.focus()}},saveScanwordClue:function(){var t=this,e=Object.keys(this.scanwordClue).filter(function(e){return t.scanwordClue[e].length>0}).reduce(function(e,r){return e[r]=t.scanwordClue[r],e},{}),r=JSON.stringify(e);localStorage.setItem("scanwordClue",r)},cellNavigation:function(t){var e=this,r=e.cells.find(function(t){return t.id===e.active.focused}),n=Object.assign({},r.coordinates),o=e.cells.filter(function(t){return t.editable&&(t.coordinates.x===n.x||t.coordinates.y===n.y)}),i={37:o.filter(function(t){return t.coordinates.x<n.x}).sort(function(t,e){return e.coordinates.x-t.coordinates.x}),38:o.filter(function(t){return t.coordinates.y<n.y}).sort(function(t,e){return e.coordinates.y-t.coordinates.y}),39:o.filter(function(t){return t.coordinates.x>n.x}).sort(function(t,e){return t.coordinates.x-e.coordinates.x}),40:o.filter(function(t){return t.coordinates.y>n.y}).sort(function(t,e){return t.coordinates.y-e.coordinates.y})},s=i[t.keyCode].length?i[t.keyCode][0]:r;e.activate(s)}},beforeDestroy:function(){this.eventHub.$off("update-cell-content",this.saveScanwordClue),this.eventHub.$off("cell-navigation",this.cellNavigation)}},H=E,N=(r("d444"),Object(g["a"])(H,s,a,!1,null,"4813fdfd",null));N.options.__file="ScanWord.vue";var R=N.exports,L={name:"app",components:{ScanWord:R}},M=L,P=(r("5c0b"),Object(g["a"])(M,o,i,!1,null,null,null));P.options.__file="App.vue";var J=P.exports,D=r("2f62");n["a"].use(D["a"]);var F=new D["a"].Store({state:{},mutations:{},actions:{}});n["a"].config.productionTip=!1;var K=new n["a"];n["a"].mixin({data:function(){return{eventHub:K}}}),new n["a"]({store:F,render:function(t){return t(J)}}).$mount("#app")},"5c0b":function(t,e,r){"use strict";var n=r("5e27"),o=r.n(n);o.a},"5e27":function(t,e,r){},c547:function(t,e,r){"use strict";var n=r("df98"),o=r.n(n);o.a},d444:function(t,e,r){"use strict";var n=r("f2f1"),o=r.n(n);o.a},df98:function(t,e,r){},f2f1:function(t,e,r){}});
//# sourceMappingURL=app.f28062d9.js.map